<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>update</title>
    <link rel="stylesheet" href="login.css">
    <!-- bootstrap links -->
   
    <!-- fontAweosum -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <!-- googleFonts -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Tangerine|Lato|Gamja+Flower|Open+Sans|Roboto+Slab|Indie+Flower|Lobster|Open+Sans|Kosugi+Maru">
</head>

<body>
    <div class="modal-body">
        <form autocomplete="off" class="form-group" id="signup-form" onsubmit="updateUserProfile(event)">
            <label for="">Name</label>
            <input type="text" class="form-control" id="name" required><br>
            <input type="text" id="rcoins" value="100" style="display: none;">
            <button type="submit"  class="btn btn-primary">REGISTER</button>
        </form>

        <button onclick="uplog()">update</button>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
</script>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyCTgqtMVnMcOqcQ7pDqoUA-F_kR-KlSqfg",
            authDomain: "paimente-bb7cc.firebaseapp.com",
            databaseURL: "https://paimente-bb7cc-default-rtdb.firebaseio.com",
            projectId: "paimente-bb7cc",
            storageBucket: "paimente-bb7cc.appspot.com",
            messagingSenderId: "772305114013",
            appId: "1:772305114013:web:73485cfdbb0d2eb3d91574",
            measurementId: "G-BXF8NJ7L8Q"
        };

        firebase.initializeApp(firebaseConfig);

        const auth = firebase.auth();
        const db = firebase.firestore();

        firebase.auth().onAuthStateChanged((user) => {
    var user = firebase.auth().currentUser;
    if (user) {
      // User is signed in, see docs for a list of available properties
      //https://firebase.google.com/docs/reference/js/firebase.User
      var uid = user.uid;
      fs.collection('users').doc(user.uid).get().then((snapshot) => {
        console.log(snapshot.data().Name);
        username.innerText = snapshot.data().Name;
        window.location = "index.html";
    })
    } else {
      // User is signed out
      localStorage.setItem('username', user)
      console.log('user is not signed in to retrive username');
    }
  });

    </script>
</body>

</html>